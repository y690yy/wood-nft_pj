<!DOCTYPE html>
<html>
<head>
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
        document.querySelector("a-scene").addEventListener("click", function(event) {
      // ここで、`<a-image>`からのイベントであればリンクに遷移する処理を書く
      // しかし、基本的にはこのレベルでのクリックイベントは無視する
    }, true); // trueでキャプチャフェーズでイベントを捕捉



      const markers = [
        {
          patt: "qr_code/arco_marker/aruco_02.patt",
          imageSrc: "ntf_figures/figure_002.png",
          link: "https://woodnft.github.io/woodnft-demo/#/CardDetailPage/1"
        },
        
        {
          patt: "qr_code/arco_marker/aruco_01.patt",
          imageSrc: "ntf_figures/figure_001.png",
          link: "https://woodnft.github.io/woodnft-demo/#/CardDetailPage/0"
        }
      ];

      markers.forEach((marker, index) => {
        const scene = document.querySelector("a-scene");
        const aMarker = document.createElement("a-marker");
        aMarker.setAttribute("type", "pattern");
        aMarker.setAttribute("url", marker.patt);
        aMarker.setAttribute("id", `marker-${index}`);

        const aImage = document.createElement("a-image");
        aImage.setAttribute("src", marker.imageSrc);
        aImage.setAttribute("width", "1");
        aImage.setAttribute("height", "1");
        aImage.setAttribute("position", "0 0 0");
        aImage.setAttribute("rotation", "0 0 180");

        // ここで `event` を引数として追加
        aImage.addEventListener("click", (event) => {
          event.stopPropagation(); // イベントの伝播を停止
          window.location.href = marker.link;
        });

        aMarker.appendChild(aImage);
        scene.appendChild(aMarker);
      });
    });
  </script>
</head>
<body>
  <a-scene embedded arjs="patternRatio:0.80" vr-mode-ui="enabled: false">
    <a-entity camera cursor="fuse: false; rayOrigin : mouse;"></a-entity>
  </a-scene>
</body>
</html>